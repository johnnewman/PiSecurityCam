upstream camera0 {
    server <address>:443;
}

upstream camera1 {
    server <address>:443;
}

auth_basic             "Please Log In";
auth_basic_user_file   /etc/apache2/.htpasswd;

ssl_certificate        /etc/nginx/certs/server.crt;
ssl_certificate_key    /etc/nginx/certs/server.key;
ssl_client_certificate /etc/nginx/certs/ca.crt;
ssl_verify_client      on;

proxy_ssl_session_reuse       on;
proxy_ssl_trusted_certificate /etc/nginx/certs/ca.crt;
proxy_ssl_verify              on;
proxy_ssl_verify_depth        2;
proxy_ssl_certificate         /etc/nginx/certs/proxy_client.crt;
proxy_ssl_certificate_key     /etc/nginx/certs/proxy_client.key;
proxy_buffering               off;

server {
    listen 443 ssl;
    server_name <name>;

    location /camera0/ {
        proxy_pass https://camera0/;
    }

    location /camera1/ {
        proxy_pass https://camera1/;
    }

    location / {
        deny all;
    }
}
